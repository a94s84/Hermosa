{"version":3,"sources":["webpack:///./src/assets/img/delete.svg","webpack:///./src/views/UserCart.vue","webpack:///./src/views/UserCart.vue?6ec1"],"names":["module","exports","class","_createElementVNode","href","src","_imports_0","alt","_hoisted_27","_createVNode","_component_Loading","active","$data","_hoisted_4","_hoisted_5","onClick","$options","total","_createElementBlock","_hoisted_7","_Fragment","_renderList","carts","item","key","id","product","imageUrl","_toDisplayString","title","_hoisted_13","_hoisted_14","type","qty","_hoisted_17","min","$event","onChange","_hoisted_19","price","origin_price","_hoisted_20","_ctx","currency","_hoisted_23","final_total","_component_DelModal","ref","onDelProduct","delItem","_component_router_link","to","name","query","category","_createBlock","data","tempProduct","isLoading","components","DelModal","inject","methods","getCartList","this","api","process","$http","get","then","res","success","console","log","updateCart","url","cart","product_id","put","openDelModal","$refs","delModal","showModal","delITem","length","delete","delComponet","hideModal","$httpMessageState","created","mounted","updated","__exports__","render"],"mappings":"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","file":"js/chunk-8e6f9542.51c51416.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/delete.6df6e3fc.svg\";","<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"contentWrap\">\r\n    <div class=\"wrap cartWrap\">\r\n      <!-- 購物車步驟及標題 -->\r\n      <div class=\"cart_top\">\r\n          <ul class=\"cart_menu\">\r\n              <li class=\"active\">購物清單</li>\r\n              <li>填寫資料</li>\r\n              <li>確認訂單</li>\r\n              <li>完成購物</li>\r\n          </ul>\r\n            <div>\r\n              <h2>購物清單</h2>\r\n              <a class=\"btn btn-outline-secondary\" @click.prevent=\"openDelModal()\">清空購物車</a>\r\n          </div>\r\n      </div>\r\n      <!-- 購物車商品列表 -->\r\n      <div class=\"cart_buyinglist\">\r\n          <form v-if=\"carts.total !== 0\">\r\n              <div class=\"cart_pdbox pdbox\" v-for=\"item in carts.carts\" :key=\"item.id\">\r\n                  <a href=\"product.html\">\r\n                      <img :src=\"`${item.product.imageUrl}`\">\r\n                  </a>\r\n                  <a href=\"#\">\r\n                      <p class=\"pdbox_name\">{{item.product.title}}</p>\r\n                  </a>\r\n                  <table class=\"pdcnt_table\">\r\n                      <thead>\r\n                          <tr>\r\n                              <th>SIZE</th>\r\n                              <th>QUANTITY</th>\r\n                              <td>Price</td>\r\n                          </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                          <tr>\r\n                              <td class=\"pdcnt_info_size\">F\r\n                              </td>\r\n                              <td class=\"pdcnt_info_number\">\r\n                                  <div class=\"position-relative\">\r\n                                      <button class=\"text-dark qty-minus\" type=\"button\" @click.prevent=\"updateCart( item, item.qty - 1 )\"> - </button>\r\n                                      <input class=\"text-center w-25 border-0 bg-transparent\" type=\"number\" min=\"1\" v-model.number=\"item.qty\" @change=\"updateCart(item, item.qty)\">\r\n                                      <button type=\"button\" class=\"text-dark qty-plus\" @click.prevent=\"updateCart(item, item.qty + 1)\"> + </button>\r\n                                  </div>\r\n                              </td>\r\n                              <td v-if=\"item.product.price !== item.product.origin_price\"><span class=\"pdbox_price-sale\">{{$filters.currency(item.product.price)}}</span><span class=\"pdbox_price-origin\">{{$filters.currency(item.product.origin_price)}}</span></td>\r\n                              <td v-else>{{$filters.currency(item.product.price)}}</td>\r\n                          </tr>\r\n                      </tbody>\r\n                  </table>\r\n                  <div class=\"d-sp\">\r\n                      <p class=\"pdcnt_price\">Total: NT${{ $filters.currency(item.final_total) }}</p>\r\n                      <a href=\"javascript:void(0)\" class=\"pdcnt_trash\" @click.prevent=\"openDelModal(item)\">\r\n                          <img src=\"../assets/img/delete.svg\" alt=\"\">\r\n                      </a>\r\n                  </div>\r\n              </div>\r\n          </form>\r\n          <div class=\"cart_nothing\" v-else>您的購物車目前是空的！</div>\r\n          <DelModal ref=\"delModal\" @del-Product=\"delITem\" :delItem=\"tempProduct\"></DelModal>\r\n      </div>\r\n        </div>\r\n        <!-- footerfixed結帳金額 -->\r\n        <div class=\"footer_fixed\">\r\n          <div class=\"wrap d-sp\">\r\n             <router-link :to=\"{ name: 'productlist', query: { category: 'ALL' }}\" class=\"btn_pre_white\">繼續購物</router-link>\r\n            <div>\r\n                <h3>總計: <span>NT${{ $filters.currency(carts.final_total) }}</span> </h3>\r\n            </div>\r\n            <div>\r\n              <router-link to=\"/check\" class=\"btn_next_white\" v-if=\"carts.total > 0\">下一步</router-link>\r\n            </div>\r\n          </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import $ from 'jquery'\r\nimport DelModal from '@/components/DelModal.vue'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      carts: [],\r\n      tempProduct: {},\r\n      isLoading: false\r\n    }\r\n  },\r\n  components: {\r\n    DelModal\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getCartList (item) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(api).then((res) => {\r\n        this.isLoading = false\r\n        if (res.data.success) {\r\n          this.carts = res.data.data\r\n        }\r\n        console.log(this.carts)\r\n        console.log(res)\r\n      })\r\n    },\r\n    updateCart (item, qty) {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: qty\r\n      }\r\n      this.$http.put(url, { data: cart }).then((res) => {\r\n        this.isLoading = false\r\n        this.getCartList()\r\n      })\r\n    },\r\n    openDelModal (item) {\r\n      this.tempProduct = { ...item }\r\n      this.$refs.delModal.showModal()\r\n      console.log(this.tempProduct)\r\n    },\r\n    delITem () {\r\n      this.isLoading = true\r\n      let url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`\r\n      console.log(url)\r\n      if (this.tempProduct.length > 0) {\r\n        url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${this.tempProduct.id}`\r\n      }\r\n      this.$http.delete(url).then((res) => {\r\n        this.isLoading = false\r\n        const delComponet = this.$refs.delModal\r\n        delComponet.hideModal()\r\n        this.$httpMessageState(res, '移除購物車品項')\r\n        this.getCartList()\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getCartList()\r\n  },\r\n  mounted () {\r\n  },\r\n  updated () {\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserCart.vue?vue&type=template&id=3536468e\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Desktop\\\\Stacy\\\\VueProject\\\\hermosa\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}