(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-177ee537"],{1799:function(e,t,c){"use strict";var n=c("7a23"),a={"aria-label":"Page navigation"},o={class:"pagination justify-content-center"},r=Object(n["h"])("span",{"aria-hidden":"true"},"«",-1),i=[r],l=["onClick"],s=Object(n["h"])("span",{"aria-hidden":"true"},"»",-1),d=[s];function u(e,t,c,r,s,u){return Object(n["A"])(),Object(n["g"])("nav",a,[Object(n["h"])("ul",o,[Object(n["h"])("li",{class:Object(n["s"])(["page-item",{disabled:!c.pages.has_pre}])},[Object(n["h"])("a",{class:"page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:t[0]||(t[0]=Object(n["W"])((function(e){return u.updatePage(c.pages.current_page-1)}),["prevent"]))},i)],2),(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(c.pages.total_pages,(function(e){return Object(n["A"])(),Object(n["g"])("li",{class:Object(n["s"])(["page-item",{active:e===c.pages.current_page}]),key:e},[Object(n["h"])("a",{class:"page-link",href:"javascript:void(0)",onClick:Object(n["W"])((function(t){return u.updatePage(e)}),["prevent"])},Object(n["L"])(e),9,l)],2)})),128)),Object(n["h"])("li",{class:Object(n["s"])(["page-item",{disabled:!c.pages.has_next}])},[Object(n["h"])("a",{class:"page-link",href:"javascript:void(0)","aria-label":"Next",onClick:t[1]||(t[1]=Object(n["W"])((function(e){return u.updatePage(c.pages.current_page+1)}),["prevent"]))},d)],2)])])}var b={props:["pages"],methods:{updatePage:function(e){this.$emit("emit-pages",e)}}},p=c("6b0d"),h=c.n(p);const m=h()(b,[["render",u]]);t["a"]=m},"578c":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a={class:"p-4"},o={class:"text-end mt-3"},r={class:"table mt-4"},i=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",{width:"10%"},"分類"),Object(n["h"])("th",{width:"35%"},"產品名稱"),Object(n["h"])("th",{width:"12%"},"原價"),Object(n["h"])("th",{width:"12%"},"售價"),Object(n["h"])("th",{width:"10%"},"是否啟用"),Object(n["h"])("th",{width:"19%",class:"text-center"},"編輯")])],-1),l={class:"text-right"},s={class:"text-right"},d={key:0,class:"text-success"},u={key:1,class:"text-muted"},b={class:"text-center"},p={class:"btn-group"},h=["onClick"],m=["onClick"];function j(e,t,c,j,O,f){var g=Object(n["I"])("Loading"),P=Object(n["I"])("Pagination"),v=Object(n["I"])("ProductModal"),y=Object(n["I"])("DelModal");return Object(n["A"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(g,{active:O.isLoading},null,8,["active"]),Object(n["h"])("div",a,[Object(n["h"])("div",o,[Object(n["h"])("button",{class:"btn btn-warning btn-sm",type:"button",onClick:t[0]||(t[0]=function(e){return f.openModal(!0)})},"增加產品")]),Object(n["h"])("table",r,[i,Object(n["h"])("tbody",null,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(O.products,(function(t){return Object(n["A"])(),Object(n["g"])("tr",{key:t.id},[Object(n["h"])("td",null,Object(n["L"])(t.category),1),Object(n["h"])("td",null,Object(n["L"])(t.title),1),Object(n["h"])("td",l,Object(n["L"])(e.$filters.currency(t.origin_price)),1),Object(n["h"])("td",s,Object(n["L"])(e.$filters.currency(t.price)),1),Object(n["h"])("td",null,[t.is_enabled?(Object(n["A"])(),Object(n["g"])("span",d,"啟用")):(Object(n["A"])(),Object(n["g"])("span",u,"未啟用"))]),Object(n["h"])("td",b,[Object(n["h"])("div",p,[Object(n["h"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(e){return f.openModal(!1,t)}},"編輯",8,h),Object(n["h"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(e){return f.openDelModal(t)}},"刪除",8,m)])])])})),128))])]),Object(n["k"])(P,{pages:O.pagination,onEmitPages:f.getProducts},null,8,["pages","onEmitPages"]),Object(n["k"])(v,{ref:"productModal",modalProduct:O.tempProduct,onUpdateProduct:f.updateProduct},null,8,["modalProduct","onUpdateProduct"]),Object(n["k"])(y,{ref:"delModal",onDelProduct:f.delProduct,delItem:O.tempProduct},null,8,["onDelProduct","delItem"])])],64)}var O=c("5530"),f=(c("99af"),c("a434"),c("a4d3"),c("e01a"),{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),g={class:"modal-dialog modal-xl",role:"document"},P={class:"modal-content border-0"},v=Object(n["h"])("div",{class:"modal-header bg-dark text-white"},[Object(n["h"])("h5",{class:"modal-title fs-6 lh-1",id:"exampleModalLabel"},[Object(n["h"])("span",null,"產品")]),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),y={class:"modal-body"},k={class:"row"},x={class:"col-sm-6"},T={class:"mb-3"},w=Object(n["h"])("label",{for:"image",class:"form-label"},"輸入主圖網址",-1),M={class:"mb-3"},V=Object(n["h"])("label",{for:"customFile",class:"form-label"},[Object(n["j"])("或 上傳主圖圖片 "),Object(n["h"])("i",{class:"fas fa-spinner fa-spin"})],-1),U=["src"],$={key:0,class:"mt-5"},_=["onUpdate:modelValue"],C=["onClick"],A={key:0},L={class:"col-sm-6"},I={class:"mb-3"},D=Object(n["h"])("label",{for:"title",class:"form-label"},"*標題",-1),S={class:"row gx-2"},F={class:"mb-3 col-md-6"},q=Object(n["h"])("label",{for:"category",class:"form-label"},"*分類",-1),N={class:"mb-3 col-md-6"},E=Object(n["h"])("label",{for:"price",class:"form-label"},"*單位",-1),G={class:"row gx-2"},W={class:"mb-3 col-md-6"},J=Object(n["h"])("label",{for:"origin_price",class:"form-label"},"*原價",-1),z={class:"mb-3 col-md-6"},B=Object(n["h"])("label",{for:"price",class:"form-label"},"*售價",-1),H=Object(n["h"])("hr",null,null,-1),K={class:"mb-3"},Q=Object(n["h"])("label",{for:"description",class:"form-label"},"產品描述",-1),R={class:"mb-3"},X=Object(n["h"])("label",{for:"content",class:"form-label"},"說明內容",-1),Y={class:"mb-3"},Z={class:"form-check"},ee=Object(n["h"])("label",{class:"form-check-label lh-base",for:"is_enabled"}," 是否啟用 ",-1),te={class:"modal-footer"},ce=Object(n["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function ne(e,t,c,a,o,r){return Object(n["A"])(),Object(n["g"])("div",f,[Object(n["h"])("div",g,[Object(n["h"])("div",P,[v,Object(n["h"])("div",y,[Object(n["h"])("div",k,[Object(n["h"])("div",x,[Object(n["h"])("div",T,[w,Object(n["V"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.innerTempProduct.imageUrl=e}),placeholder:"請輸入圖片連結"},null,512),[[n["P"],o.innerTempProduct.imageUrl]])]),Object(n["h"])("div",M,[V,Object(n["h"])("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:t[1]||(t[1]=function(){return r.uploadFile&&r.uploadFile.apply(r,arguments)})},null,544)]),Object(n["h"])("img",{class:"img-fluid",src:o.innerTempProduct.imageUrl,alt:"",width:"250"},null,8,U),o.innerTempProduct.images?(Object(n["A"])(),Object(n["g"])("div",$,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(o.innerTempProduct.images,(function(e,t){return Object(n["A"])(),Object(n["g"])("div",{class:"mb-3 input-group",key:t},[Object(n["V"])(Object(n["h"])("input",{type:"url",class:"form-control form-control","onUpdate:modelValue":function(e){return o.innerTempProduct.images[t]=e},placeholder:"請輸入連結"},null,8,_),[[n["P"],o.innerTempProduct.images[t]]]),Object(n["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return o.innerTempProduct.images.splice(t,1)}},"> 移除 ",8,C)])})),128)),o.innerTempProduct.images[o.innerTempProduct.images.length-1]||!o.innerTempProduct.images.length?(Object(n["A"])(),Object(n["g"])("div",A,[Object(n["h"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[2]||(t[2]=function(e){return o.innerTempProduct.images.push("")})},"新增圖片")])):Object(n["f"])("",!0)])):Object(n["f"])("",!0)]),Object(n["h"])("div",L,[Object(n["h"])("div",I,[D,Object(n["V"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.innerTempProduct.title=e}),required:"",placeholder:"請輸入標題"},null,512),[[n["P"],o.innerTempProduct.title]])]),Object(n["h"])("div",S,[Object(n["h"])("div",F,[q,Object(n["V"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.innerTempProduct.category=e}),required:"",placeholder:"請輸入分類"},null,512),[[n["P"],o.innerTempProduct.category]])]),Object(n["h"])("div",N,[E,Object(n["V"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"unit",required:"","onUpdate:modelValue":t[5]||(t[5]=function(e){return o.innerTempProduct.unit=e}),placeholder:"請輸入單位"},null,512),[[n["P"],o.innerTempProduct.unit]])])]),Object(n["h"])("div",G,[Object(n["h"])("div",W,[J,Object(n["V"])(Object(n["h"])("input",{type:"number",class:"form-control",id:"origin_price",required:"","onUpdate:modelValue":t[6]||(t[6]=function(e){return o.innerTempProduct.origin_price=e}),placeholder:"請輸入原價"},null,512),[[n["P"],o.innerTempProduct.origin_price]])]),Object(n["h"])("div",z,[B,Object(n["V"])(Object(n["h"])("input",{type:"number",class:"form-control",id:"price",required:"","onUpdate:modelValue":t[7]||(t[7]=function(e){return o.innerTempProduct.price=e}),placeholder:"請輸入售價"},null,512),[[n["P"],o.innerTempProduct.price]])])]),H,Object(n["h"])("div",K,[Q,Object(n["V"])(Object(n["h"])("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[8]||(t[8]=function(e){return o.innerTempProduct.description=e}),placeholder:"請輸入產品描述"},null,512),[[n["P"],o.innerTempProduct.description]])]),Object(n["h"])("div",R,[X,Object(n["V"])(Object(n["h"])("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":t[9]||(t[9]=function(e){return o.innerTempProduct.content=e}),placeholder:"請輸入產品說明內容",rows:"5"},null,512),[[n["P"],o.innerTempProduct.content]])]),Object(n["h"])("div",Y,[Object(n["h"])("div",Z,[Object(n["V"])(Object(n["h"])("input",{class:"form-check-input mt-0",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":t[10]||(t[10]=function(e){return o.innerTempProduct.is_enabled=e})},null,512),[[n["O"],o.innerTempProduct.is_enabled]]),ee])])])])]),Object(n["h"])("div",te,[ce,Object(n["h"])("button",{type:"button",class:"btn btn-primary",onClick:t[11]||(t[11]=function(t){return e.$emit("update-product",o.innerTempProduct)})},"確認")])])])],512)}var ae=c("e0ae"),oe={props:{modalProduct:{type:Object,default:function(){return{}}}},watch:{modalProduct:function(){this.innerTempProduct=this.modalProduct,this.innerTempProduct.images||(this.innerTempProduct.images=[])}},data:function(){return{modal:{},innerTempProduct:{}}},mixins:[ae["a"]],methods:{uploadFile:function(){var e=this,t=this.$refs.fileInput.files[0],c=new FormData;c.append("file-to-upload",t);var n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hermosa","/admin/upload");this.$http.post(n,c).then((function(t){t.data.success?e.innerTempProduct.imageUrl=t.data.imageUrl:(alert("請填寫所有必填欄位"),e.getProducts(),console.log(t))}))}}},re=c("6b0d"),ie=c.n(re);const le=ie()(oe,[["render",ne]]);var se=le,de=c("6ff1"),ue=c("1799"),be={data:function(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}},components:{ProductModal:se,DelModal:de["a"],Pagination:ue["a"]},inject:["emitter"],methods:{openModal:function(e,t){this.tempProduct=e?{}:Object(O["a"])({},t),this.isNew=e,this.$refs.productModal.showModal()},getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hermosa","/admin/products/?page=").concat(t);this.isLoading=!0,this.$http.get(c).then((function(t){e.isLoading=!1,t.data.success&&(e.products=t.data.products,e.pagination=t.data.pagination)}))},updateProduct:function(e){var t=this;this.tempProduct=e;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hermosa","/admin/product"),n="post";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hermosa","/admin/product/").concat(e.id),n="put");var a=this.$refs.productModal;this.$http[n](c,{data:this.tempProduct}).then((function(e){a.hideModal(),t.$httpMessageState(e,"更新成功")}))},openDelModal:function(e){this.tempProduct=Object(O["a"])({},e),this.$refs.delModal.showModal()},delProduct:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hermosa","/admin/product/").concat(this.tempProduct.id);this.$http.delete(t).then((function(t){var c=e.$refs.delModal;c.hideModal(),e.emitter.emit("push-message",{style:"success",title:"成功刪除"}),e.getProducts()}))}},created:function(){this.getProducts()}};const pe=ie()(be,[["render",j]]);t["default"]=pe},a434:function(e,t,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("23cb"),r=c("5926"),i=c("07fa"),l=c("7b0b"),s=c("65f0"),d=c("8418"),u=c("1dde"),b=u("splice"),p=a.TypeError,h=Math.max,m=Math.min,j=9007199254740991,O="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!b},{splice:function(e,t){var c,n,a,u,b,f,g=l(this),P=i(g),v=o(e,P),y=arguments.length;if(0===y?c=n=0:1===y?(c=0,n=P-v):(c=y-2,n=m(h(r(t),0),P-v)),P+c-n>j)throw p(O);for(a=s(g,n),u=0;u<n;u++)b=v+u,b in g&&d(a,u,g[b]);if(a.length=n,c<n){for(u=v;u<P-n;u++)b=u+n,f=u+c,b in g?g[f]=g[b]:delete g[f];for(u=P;u>P-n+c;u--)delete g[u-1]}else if(c>n)for(u=P-n;u>v;u--)b=u+n-1,f=u+c-1,b in g?g[f]=g[b]:delete g[f];for(u=0;u<c;u++)g[u+v]=arguments[u+2];return g.length=P-n+c,a}})},e01a:function(e,t,c){"use strict";var n=c("23e7"),a=c("83ab"),o=c("da84"),r=c("e330"),i=c("1a2d"),l=c("1626"),s=c("3a9b"),d=c("577e"),u=c("9bf2").f,b=c("e893"),p=o.Symbol,h=p&&p.prototype;if(a&&l(p)&&(!("description"in h)||void 0!==p().description)){var m={},j=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=s(h,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};b(j,p),j.prototype=h,h.constructor=j;var O="Symbol(test)"==String(p("test")),f=r(h.toString),g=r(h.valueOf),P=/^Symbol\((.*)\)[^)]+$/,v=r("".replace),y=r("".slice);u(h,"description",{configurable:!0,get:function(){var e=g(this),t=f(e);if(i(m,e))return"";var c=O?y(t,7,-1):v(t,P,"$1");return""===c?void 0:c}}),n({global:!0,forced:!0},{Symbol:j})}}}]);
//# sourceMappingURL=chunk-177ee537.6a82eda5.js.map